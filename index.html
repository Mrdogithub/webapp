<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>OSB</title>
    <meta name="viewport"
    content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <script type="text/javascript" src='https://webapi.amap.com/maps?v=1.3&key=d103678d66ed712befc5700a2157d3d3&plugin=AMap.CloudDataSearch'></script>
    <script src="https://webapi.amap.com/ui/1.0/main.js?v=1.0.10"></script>
    <script type="text/javascript" src="https://webapi.amap.com/demos/js/liteToolbar.js"></script>
  </head>
  <body>
    <div id="app"></div>
  </body>
  <script>
		function importNativeData(message){
			var _JSON = message
			if(_JSON) {
				window.localStorage.clear()
				window.localStorage.setItem('osb', _JSON)
			}
		}
		function saveCalendarSuccess(message) {
			if (typeof(message) === 'boolean' || typeof(message) === 'string') {
				message = message
			} else {
				message = 'noResponse'
				let _osbAuth = JSON.parse(window.localStorage.getItem('osb'))
				_osbAuth['saveToCalendarStatus'] = message
				window.localStorage.setItem('osb', JSON.stringify(_osbAuth))
			}
		}
		var u = navigator.userAgent
		var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1 // android终端
		var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) // ios终端
		if (isAndroid) {
			window.AppModel.postMessage(JSON.stringify({'message': 'importNativeData'}));
		} else if (isiOS) {
			window.webkit.messageHandlers.AppModel.postMessage(JSON.stringify({'message': 'importNativeData'}));
		}

		importNativeData()
		saveCalendarSuccess(false)
  </script>
</html>